{% extends "layout.html" %}
{% block content %}
<!-- Metadata -->
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Metadata</h3>
    </div>
    <div class="panel-body">
        <ul class="list-group">
            <li class="list-group-item"><b>Room: </b>{{ user.room }}</li>
            <li class="list-group-item"><b>Date: </b>{{ user.date }} ({{ user.timestamp }})</li>
            <li class="list-group-item">
                <form action="{{ url_for('label_experiment', exp_id=user.timestamp) }}" method="GET" target="_blank">
                    <div class="input-group">
                        <input type="text" class="form-control" name="label" placeholder="Label: {{ user.label }}">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="submit">Change Label</button>
                        </span>
                    </div>
                </form>
            </li>
        </ul>
    </div>
</div>
<hr>
<!-- Data Details -->
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Data Details</h3>
    </div>
    <div class="panel-body">
        <ul class="list-group">
            <li class="list-group-item"># Cameras:<span class="badge">{{ user.camera }}</span></li>
            {% for key, value in user.n_images.iteritems() %}
            <li class="list-group-item">{{ key|e }} <span class="badge">{{ value|e }}</span></li>
            {% endfor %}
            <li class="list-group-item"><b>Archived?: </b><img src="{{ url_for('static', filename=user.image) }}"
                    alt="Status"></li>
        </ul>
    </div>
</div>
<hr>
<!-- Administration -->
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Administration</h3>
    </div>
    <div class="panel-body">
        <div class="list-group">
            <a class="list-group-item" href={{ url_for('delete_experiment', exp_id=user.timestamp) }}
                target="_blank">Delete
                Experiment</a>
            <a class="list-group-item" href={{ url_for('compress_experiment', exp_id=user.timestamp) }}
                target="_blank">Create
                an Archive from Data</a>
            <a class="list-group-item" href={{ url_for('delete_archive', exp_id=user.timestamp) }}
                target="_blank">Delete
                Archive</a>
            <a class="list-group-item" href={{ url_for('clone_experiment', id=user.timestamp) }} target="_blank">Move
                data to
                cloud</a>
        </div>
    </div>
</div>
<hr>
<!-- Pose Detection -->
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Pose Detection</h3>
    </div>
    <div class="list-group">
        <a class="list-group-item" href={{ url_for('pose_exp', exp_id=user.timestamp) }} target="_blank">Pose Detection
            for
            the
            Whole Experiment</a>
        {% for camera_id in range(user.camera): %}
        <a class="list-group-item" href={{ url_for('pose_cam', exp_id=user.timestamp, camera_id=camera_id ) }}
            target="_blank">Camera {{ camera_id }}: <span class="badge">{{
                user.pose_detection_processed_images[camera_id]
                }}</span></a>
        {% endfor %}
    </div>
</div>
<hr>

<!-- Visualization -->
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Visualization</h3>
    </div>
    <div class="list-group list-group-item-primary">
        {% for camera_id in range(user.camera): %}

        <div class="btn-group list-group-item list-group-item-action" role="group" aria-label="...">
            Camera {{ camera_id }}:
            <a class="btn btn-default" role="button" href={{ url_for('draw_matchsticks', exp_id=user.timestamp,
                camera_id=camera_id ) }} target="_blank">Step 1</a>
            <a class="btn btn-default" role="button" href={{ url_for('make_videofrom_matchsticks',
                exp_id=user.timestamp, camera_id=camera_id, fps=10) }} target="_blank">Step 2</a>
            <a class="btn btn-default" role="button" href={{ url_for('get_matchstick_video', exp_id=user.timestamp,
                camera_id=camera_id) }} target="_blank">Step 3</a>
        </div>
        {% endfor %}
    </div>
</div>
<!-- TODO -->
<!-- <hr> -->
<!-- <h2>Computer Vision</h2>
<p><a href={{ url_for('make_thumbnails', exp_id=user.timestamp) }} target="_blank">Make Thumbnails and Extract
    Features</a></p>
<p><a href={{ url_for('match_people', exp_id=user.timestamp) }} target="_blank">Match People</a></p>
<p><a href={{ url_for('triangulate', exp_id=user.timestamp) }} target="_blank">Estimate 3D Locations</a></p> -->
{% endblock %}
